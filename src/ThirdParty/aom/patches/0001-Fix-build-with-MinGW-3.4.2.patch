From edc91f88eb2a62dd2efaec39503b8a6474cd9c93 Mon Sep 17 00:00:00 2001
From: Peter Zhigalov <peter.zhigalov@gmail.com>
Date: Sun, 14 Nov 2021 17:11:43 +0700
Subject: [PATCH 1/2] Fix build with MinGW 3.4.2

---
 aom/aom_codec.h        | 2 +-
 av1/encoder/ratectrl.h | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/aom/aom_codec.h b/aom/aom_codec.h
index 49d48cf15..33ae5640b 100644
--- a/aom/aom_codec.h
+++ b/aom/aom_codec.h
@@ -132,7 +132,7 @@ extern "C" {
 
 /*!\brief Decorator indicating that given struct/union/enum is packed */
 #ifndef ATTRIBUTE_PACKED
-#if defined(__GNUC__) && __GNUC__
+#if defined(__GNUC__) && ((__GNUC__ > 4) || (__GNUC__ == 4 && __GNUC_MINOR__ >= 4))
 #define ATTRIBUTE_PACKED __attribute__((packed))
 #elif defined(_MSC_VER)
 #define ATTRIBUTE_PACKED
diff --git a/av1/encoder/ratectrl.h b/av1/encoder/ratectrl.h
index 5ac9660ab..fbabec01c 100644
--- a/av1/encoder/ratectrl.h
+++ b/av1/encoder/ratectrl.h
@@ -323,7 +323,7 @@ typedef struct {
   int arf_q;
 
   /*!\cond */
-  float_t arf_boost_factor;
+  float arf_boost_factor;
 
   int base_layer_qp;
 
-- 
2.37.1

