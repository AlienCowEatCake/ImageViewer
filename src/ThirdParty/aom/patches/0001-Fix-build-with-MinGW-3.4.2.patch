From 2a1a42523bae1a718a6a07581df8eacc18732c86 Mon Sep 17 00:00:00 2001
From: Peter Zhigalov <peter.zhigalov@gmail.com>
Date: Sun, 14 Nov 2021 17:11:43 +0700
Subject: [PATCH 1/2] Fix build with MinGW 3.4.2

---
 aom/aom_codec.h        | 2 +-
 av1/encoder/ratectrl.h | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/aom/aom_codec.h b/aom/aom_codec.h
index d5b8790a98..04f6fd667d 100644
--- a/aom/aom_codec.h
+++ b/aom/aom_codec.h
@@ -132,7 +132,7 @@ extern "C" {
 
 /*!\brief Decorator indicating that given struct/union/enum is packed */
 #ifndef ATTRIBUTE_PACKED
-#if defined(__GNUC__) && __GNUC__
+#if defined(__GNUC__) && ((__GNUC__ > 4) || (__GNUC__ == 4 && __GNUC_MINOR__ >= 4))
 #define ATTRIBUTE_PACKED __attribute__((packed))
 #elif defined(_MSC_VER)
 #define ATTRIBUTE_PACKED
diff --git a/av1/encoder/ratectrl.h b/av1/encoder/ratectrl.h
index 4fb11791cb..13515dec51 100644
--- a/av1/encoder/ratectrl.h
+++ b/av1/encoder/ratectrl.h
@@ -348,7 +348,7 @@ typedef struct {
   int arf_q;
 
   /*!\cond */
-  float_t arf_boost_factor;
+  float arf_boost_factor;
 
   int base_layer_qp;
 
-- 
2.42.0

