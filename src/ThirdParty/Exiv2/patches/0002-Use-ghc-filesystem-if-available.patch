From af3bb61464d8e65560da55721fc562ea59f5d208 Mon Sep 17 00:00:00 2001
From: Peter Zhigalov <peter.zhigalov@gmail.com>
Date: Wed, 12 Jun 2024 06:06:50 +0700
Subject: [PATCH 2/4] Use ghc::filesystem if available

---
 src/basicio.cpp       | 5 ++++-
 src/futils.cpp        | 5 ++++-
 src/makernote_int.cpp | 5 ++++-
 3 files changed, 12 insertions(+), 3 deletions(-)

diff --git a/src/basicio.cpp b/src/basicio.cpp
index 66e78831d..7221fd47b 100644
--- a/src/basicio.cpp
+++ b/src/basicio.cpp
@@ -43,7 +43,10 @@ using mode_t = unsigned short;
 #include <windows.h>
 #endif
 
-#if __has_include(<filesystem>)
+#if __has_include(<ghc/filesystem.hpp>)
+#include <ghc/filesystem.hpp>
+namespace fs = ghc::filesystem;
+#elif __has_include(<filesystem>)
 #include <filesystem>
 namespace fs = std::filesystem;
 #else
diff --git a/src/futils.cpp b/src/futils.cpp
index e2adc9735..1a1c5d087 100644
--- a/src/futils.cpp
+++ b/src/futils.cpp
@@ -17,7 +17,10 @@
 #include <stdexcept>
 
 #ifdef EXV_ENABLE_FILESYSTEM
-#if __has_include(<filesystem>)
+#if __has_include(<ghc/filesystem.hpp>)
+#include <ghc/filesystem.hpp>
+namespace fs = ghc::filesystem;
+#elif __has_include(<filesystem>)
 #include <filesystem>
 namespace fs = std::filesystem;
 #else
diff --git a/src/makernote_int.cpp b/src/makernote_int.cpp
index 0579d2596..df3851293 100644
--- a/src/makernote_int.cpp
+++ b/src/makernote_int.cpp
@@ -19,7 +19,10 @@
 #include <iostream>
 
 #ifdef EXV_ENABLE_FILESYSTEM
-#if __has_include(<filesystem>)
+#if __has_include(<ghc/filesystem.hpp>)
+#include <ghc/filesystem.hpp>
+namespace fs = ghc::filesystem;
+#elif __has_include(<filesystem>)
 #include <filesystem>
 namespace fs = std::filesystem;
 #else
-- 
2.39.2

