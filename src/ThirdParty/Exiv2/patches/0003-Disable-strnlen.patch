From aa2fc9407dbdbb18169a7bad557cbbdaee73b3c5 Mon Sep 17 00:00:00 2001
From: Peter Zhigalov <peter.zhigalov@gmail.com>
Date: Mon, 22 Jul 2019 04:35:21 +0700
Subject: [PATCH 03/10] Disable strnlen

---
 src/helper_functions.cpp | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/src/helper_functions.cpp b/src/helper_functions.cpp
index e01a8bf2..e5d30efd 100644
--- a/src/helper_functions.cpp
+++ b/src/helper_functions.cpp
@@ -23,7 +23,8 @@
 
 std::string string_from_unterminated(const char* data, size_t data_length)
 {
-    const size_t StringLength = strnlen(data, data_length);
+    size_t StringLength = 0;
+    for (const char* str = data; StringLength < data_length && *str; StringLength++, str++);
 
     return std::string(data, StringLength);
 }
-- 
2.34.0

