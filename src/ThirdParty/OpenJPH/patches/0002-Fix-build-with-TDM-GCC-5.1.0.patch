From 3815ceadc26e2757f59a3a29fbfb8ed7fa6f7bb6 Mon Sep 17 00:00:00 2001
From: Peter Zhigalov <peter.zhigalov@gmail.com>
Date: Mon, 9 Feb 2026 02:11:50 +0700
Subject: [PATCH 2/2] Fix build with TDM-GCC 5.1.0

---
 src/core/openjph/ojph_file.h | 17 ++---------------
 1 file changed, 2 insertions(+), 15 deletions(-)

diff --git a/src/core/openjph/ojph_file.h b/src/core/openjph/ojph_file.h
index bd3bd04..739b7d8 100644
--- a/src/core/openjph/ojph_file.h
+++ b/src/core/openjph/ojph_file.h
@@ -47,28 +47,15 @@
 namespace ojph {
 
   ////////////////////////////////////////////////////////////////////////////
-#ifdef OJPH_OS_WINDOWS
   int inline ojph_fseek(FILE* stream, si64 offset, int origin)
   {
-    return _fseeki64(stream, offset, origin);
+    return fseek(stream, static_cast<long>(offset), origin);
   }
 
   si64 inline ojph_ftell(FILE* stream)
   {
-    return _ftelli64(stream);
+    return static_cast<si64>(ftell(stream));
   }
-#else
-  int inline ojph_fseek(FILE* stream, si64 offset, int origin)
-  {
-    return fseeko(stream, offset, origin);
-  }
-
-  si64 inline ojph_ftell(FILE* stream)
-  {
-    return ftello(stream);
-  }
-#endif
-
 
   ////////////////////////////////////////////////////////////////////////////
   class OJPH_EXPORT outfile_base
-- 
2.52.0

